(self.webpackChunkjqdb_website=self.webpackChunkjqdb_website||[]).push([[195],{9405:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(7294),r=a(4314),l=(a(6742),a(2263)),c=(a(4996),a(5020));function s(e){var t=e.highlightedCode;return n.createElement("div",{className:"code"},n.createElement("pre",null,n.createElement("code",null,(0,c.ZP)(t))))}var i=a(8084),m=a(282),u=a(8463),o=a(895),g=a(1120),d=a(6019),h=a(3711),E=a(6562),v=a(6546),p=a(2880),f=a(2727),b=(0,g.Z)((function(e){return{root:{display:"flex"},formControl:{margin:e.spacing(3),width:"100%"}}})),N=function(e){var t=e.filters,a=e.onChange,r={language:t.language.reduce((function(e,t){var a;return Object.assign({},e,((a={})[t]=!1,a))}),{}),tags:t.tags.reduce((function(e,t){var a;return Object.assign({},e,((a={})[t]=!1,a))}),{})},l=b(),c=n.useState(r),s=c[0],i=c[1],m=s.tags,u=s.language,o=function(e){var t,n={language:s.language,tags:Object.assign({},s.tags,(t={},t[e.target.name]=e.target.checked,t))};a(n),i(n)},g=function(e){var t,n={tags:s.tags,language:Object.assign({},s.language,(t={},t[e.target.name]=e.target.checked,t))};a(n),i(n)};return n.createElement("div",null,n.createElement(h.Z,{component:"fieldset",className:l.formControl},n.createElement(d.Z,{component:"legend"},n.createElement("h3",null,"Language")),n.createElement(E.Z,null,Object.entries(r.language).map((function(e){return n.createElement(v.Z,{key:e[0],control:n.createElement(p.Z,{checked:u[e[0]],onChange:g,name:e[0]}),label:e[0]})})))),n.createElement(h.Z,{component:"fieldset",className:l.formControl},n.createElement(d.Z,{component:"legend"},n.createElement("h3",null,"Tags")),n.createElement(E.Z,null,Object.entries(r.tags).map((function(e){return n.createElement(v.Z,{key:e[0],control:n.createElement(p.Z,{checked:m[e[0]],onChange:o,name:e[0]}),label:e[0]})})))))},y=function(e){var t=e.textAreaId,a="COPY TO CLIPBOARD",r=(0,n.useState)(a),l=r[0],c=r[1];return n.createElement("div",null,n.createElement(m.Z,{variant:"contained",color:"primary",className:"search-result-copy",onClick:function(e){return n=t,(r=document.querySelector("#"+n)).classList.remove("hidden"),r.select(),document.execCommand("copy"),c("COPIED!"),r.classList.add("hidden"),void setTimeout((function(){c(a)}),1e3);var n,r}},l))},C=function(e){var t=e.positiveExample,a=e.negativeExample,r="SHOW MATCHING EXAMPLES",l=(0,n.useState)(r),c=l[0],i=l[1],u=(0,n.useState)(!1),o=u[0],g=u[1];return n.createElement("div",{className:"search-matching-examples"},n.createElement("div",{className:"search-matching-examples-btns"},n.createElement(m.Z,{className:"btn-matching-examples",variant:"contained",onClick:function(e){g(!o),i(o?"HIDE MATCHING EXAMPLES":r)}},c)),!o&&n.createElement("div",{className:"search-matching-examples-code"},t&&n.createElement("div",{className:"search-matching-examples-code-first"},n.createElement("span",null,"the query matches:"),n.createElement(s,{language:"java",highlightedCode:t})),a&&n.createElement("div",{className:"search-matching-examples-code-second"},n.createElement("span",null,"the query does not match:"),n.createElement(s,{language:"java",highlightedCode:a}))))},k=function(e){var t=e.results.map((function(e){var t=e.positiveExampleHighlighted||e.negativeExampleHighlighted;return n.createElement(u.Z,{className:"main-card mdc-elevation--z10",key:e.name},n.createElement("div",{className:"search-result"},n.createElement("div",null,n.createElement("h2",null,n.createElement("span",{className:"search-result-name"},e.name))),n.createElement("div",null,n.createElement("h4",null,e.title),n.createElement("p",null,e.description),"CPGQL Query:",n.createElement(s,{language:"js",highlightedCode:e.highlightedTraversal}),n.createElement("textarea",{readOnly:!0,className:"hidden",value:e.formattedTraversal,id:e.name})),n.createElement("div",null,n.createElement("span",{className:"search-result-author"},"author: ",e.author)),n.createElement("div",null,n.createElement("span",{className:"search-result-tags"},"tags: ",e.tags.join(","))),n.createElement(y,{textAreaId:e.name}),t&&n.createElement(C,{positiveExample:e.positiveExampleHighlighted,negativeExample:e.negativeExampleHighlighted})))}));return n.createElement("div",null,t)},x=function(){var e=(0,i.usePluginData)("staticcode"),t=f(e.qdb,{sortings:{name_asc:{field:"name",order:"asc"}},aggregations:{tags:{title:"Tags",size:20,conjunction:!1},language:{title:"Language",size:20,conjunction:!1}},searchableFields:["name","title","description","tags"]}),a=t.search({per_page:100,sort:"name_asc"}).data,r=a.aggregations,l={language:r.language.buckets.map((function(e){return e.key})),tags:r.tags.buckets.map((function(e){return e.key}))},c=(0,n.useState)({results:a.items}),s=c[0],m=c[1],u=(0,n.useState)({language:[],tags:[]}),g=u[0],d=u[1],h=(0,n.useState)(""),E=h[0],v=h[1],p=function(e,a){var n={per_page:100,sort:"name_asc",filters:a};void 0!==e&&e.length>0&&(n.query=e);var r=t.search(n);m({results:r.data.items})};return n.createElement("div",{className:"search-wrapper"},n.createElement("div",{className:"filler"}),n.createElement("div",{className:"search"},n.createElement("div",{className:"search-facets"},n.createElement(N,{filters:l,onChange:function(e){var t={tags:Object.keys(e.tags).filter((function(t){return e.tags[t]})),language:Object.keys(e.language).filter((function(t){return e.language[t]}))};d(t),p(E,t)}}),n.createElement("div",{class:"contribute"},"Contribute to the Joern Query Database on GitHub:",n.createElement("br",null),n.createElement("a",{href:"https://github.com/joernio/query-database"},"https://github.com/joernio/query-database"))),n.createElement("div",{className:"search-input"},n.createElement("div",{className:"search-field"},n.createElement(o.Z,{id:"standard-basic",label:"Search for queries...",variant:"outlined",margin:"normal",fullWidth:!0,color:"primary",onChange:function(e){var t=e.target.value.slice(0);p(t,g),v(t)}})),n.createElement("div",{className:"search-results"},n.createElement(k,{results:s.results})))))},Z=a(1302),j=a(3457),O=(0,Z.Z)({palette:{type:"dark",primary:{main:"#4ec001"},secondary:{main:"#4ec001"}}});var S=function(){var e=(0,l.default)().siteConfig,t=void 0===e?{}:e;return n.createElement(j.Z,{theme:O},n.createElement(r.Z,{title:""+t.title,description:"Joern Query Database"},n.createElement("main",null,n.createElement("section",{className:"search-section"},n.createElement(x,null)))))}}}]);